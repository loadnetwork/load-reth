[target.x86_64-unknown-linux-gnu]
env = {
    LIBCLANG_PATH = "/usr/lib/llvm-18/lib",
    LLVM_CONFIG_PATH = "/usr/lib/llvm-18/bin/llvm-config",
    CLANG_PATH = "/usr/lib/llvm-18/bin/clang",
    BINDGEN_EXTRA_CLANG_ARGS = "--sysroot=/usr",
}
pre-build = [
    "apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y curl lsb-release software-properties-common build-essential pkg-config libssl-dev && rm -rf /var/lib/apt/lists/*",
    "curl -fsSL https://apt.llvm.org/llvm.sh -o /tmp/llvm.sh && chmod +x /tmp/llvm.sh && /tmp/llvm.sh 18 && rm -f /tmp/llvm.sh",
    "apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y clang-18 libclang-18-dev llvm-18-dev && rm -rf /var/lib/apt/lists/*",
    "ln -sf /usr/lib/llvm-18/bin/llvm-config /usr/bin/llvm-config",
    "if [ -d /usr/lib/llvm-3.8/bin ]; then ln -sf /usr/lib/llvm-18/bin/llvm-config /usr/lib/llvm-3.8/bin/llvm-config; fi",
    "ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/libclang.so && ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/libclang.so.1 && ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/libclang.so.3.8 && if [ -d /usr/lib/llvm-3.8/lib ]; then ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/llvm-3.8/lib/libclang.so; fi",
    "ldconfig"
]

[target.aarch64-unknown-linux-gnu]
env = {
    LIBCLANG_PATH = "/usr/lib/llvm-18/lib",
    LLVM_CONFIG_PATH = "/usr/lib/llvm-18/bin/llvm-config",
    CLANG_PATH = "/usr/lib/llvm-18/bin/clang",
    BINDGEN_EXTRA_CLANG_ARGS = "--sysroot=/usr",
}
pre-build = [
    "apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y curl lsb-release software-properties-common build-essential pkg-config libssl-dev && rm -rf /var/lib/apt/lists/*",
    "curl -fsSL https://apt.llvm.org/llvm.sh -o /tmp/llvm.sh && chmod +x /tmp/llvm.sh && /tmp/llvm.sh 18 && rm -f /tmp/llvm.sh",
    "apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y clang-18 libclang-18-dev llvm-18-dev && rm -rf /var/lib/apt/lists/*",
    "ln -sf /usr/lib/llvm-18/bin/llvm-config /usr/bin/llvm-config",
    "if [ -d /usr/lib/llvm-3.8/bin ]; then ln -sf /usr/lib/llvm-18/bin/llvm-config /usr/lib/llvm-3.8/bin/llvm-config; fi",
    "ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/libclang.so && ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/libclang.so.1 && ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/libclang.so.3.8 && if [ -d /usr/lib/llvm-3.8/lib ]; then ln -sf /usr/lib/llvm-18/lib/libclang.so /usr/lib/llvm-3.8/lib/libclang.so; fi",
    "ldconfig"
]
